# 浏览器工作原理

- <a href="#jcxc">进程与线程</a>
- <a href="#TCP">TCP/IP</a>

## <a name="jcxc">进程与线程</a>

Q：什么是进程？   
A：一个进程就是一个程序的运行实例。启动程序时，操作系统会为该程序创建一块内存，用来存放代码、运行中的数据和一个执行任务的主线程，我们把这样的运行环境称为进程。

线程依附于进程，进程中使用线程合并处理（多线程）能提升运算效率。

进程和线程之间的关系：
- 进程中的任意线程执行出错，都会导致整个进程的崩溃。    
    eg: 进程中存在线程A、B、C,如果线程B出错，进程崩溃，AC线程的执行结果也没有了。
- 线程之间共享进程的数据，并且线程之间可以对进程的公共数据进行读写操作
- 当进程关闭后，操作系统会回收进程所占的内存。
- 进程之间的内容相互隔离。如果进程之间想要通信，可以使用用于进程通信（IPC）机制。

chrome浏览器进程：
目前chrome浏览器包含四个进程：
- 浏览器进程：负责界面显示，用户交互，子进程管理、存储等功能
- GPU进程：网页、chrome的ui界面采用GPU进程绘制
- 渲染进程：核心任务是将 HTML、CSS 和 JavaScript 转换为用户可以与之交互的网页，jsV8引擎运行在此进程中   
    浏览器的每个tab打开就会创建一个渲染进程。
- 网络进程：主要负责页面的网络资源加载
- 插件进程：主要是负责插件的运行，因插件易崩溃，所以需要通过插件进程来隔离，以保证插件进程崩溃不会对浏览器和页面造成影响

Q：为什么会出现一个tab页面卡住导致浏览器崩溃？不是每个tab为单独的渲染进程吗？   
A：chrome默认策略，每个标签对应一个渲染进程，但如果是从一个页面打开的新页面，且新页面和当前页面属于同一个站点（根域名和协议相同），那么新页面就会复用父页面的渲染进程（在同一渲染进程内，会共享js的运行环境）。
